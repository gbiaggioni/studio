# =============================================================================
# CONFIGURACIÓN OPENLITESPEED PARA QR MANAGER
# Ubuntu 20 + CyberPanel + OpenLiteSpeed
# =============================================================================
# 
# INSTRUCCIONES DE INSTALACIÓN:
# 1. Accede a CyberPanel
# 2. Ve a "Websites" > Tu sitio web > "Rewrite Rules"
# 3. Copia y pega esta configuración
# 4. Guarda y reinicia OpenLiteSpeed
#
# =============================================================================

# Configuración de rewrite rules para OpenLiteSpeed
# (Equivalente a .htaccess pero para OpenLiteSpeed)

# Protección de archivos JSON y sensibles
RewriteRule ^(.*/)?.*\.json$ - [F,L]
RewriteRule ^(.*/)?.*\.log$ - [F,L]
RewriteRule ^(.*/)?.*\.tmp$ - [F,L]
RewriteRule ^(.*/)?.*\.bak$ - [F,L]

# Proteger archivos críticos del sistema
RewriteRule ^(.*/)?.*\.(htaccess|htpasswd|ini|phps|fla|psd|sh)$ - [F,L]

# Redirigir errores a la página principal
RewriteRule ^error/(.*)$ /index.php [L]

# Configuración de headers HTTP para seguridad
# (Esto se puede configurar en CyberPanel > Websites > Tu sitio > Headers)
#
# X-Frame-Options: SAMEORIGIN
# X-Content-Type-Options: nosniff
# X-XSS-Protection: 1; mode=block
# Referrer-Policy: strict-origin-when-cross-origin

# =============================================================================
# CONFIGURACIÓN ADICIONAL PARA CYBERPANEL
# =============================================================================

# 1. PHP Settings en CyberPanel:
#    - Ir a "Websites" > Tu sitio > "PHP"
#    - Establecer versión PHP 7.4 o superior
#    - Configurar:
#      * max_execution_time = 300
#      * memory_limit = 256M
#      * post_max_size = 10M
#      * upload_max_filesize = 10M
#      * session.gc_maxlifetime = 3600

# 2. SSL/TLS Configuration:
#    - Activar SSL en CyberPanel
#    - Usar Let's Encrypt para certificado gratuito
#    - Forzar HTTPS redirect

# 3. Security Headers (en CyberPanel > Websites > Tu sitio > Headers):
#    X-Frame-Options: SAMEORIGIN
#    X-Content-Type-Options: nosniff
#    X-XSS-Protection: 1; mode=block
#    Content-Security-Policy: default-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://api.qrserver.com https://ipapi.co; img-src 'self' data: https:;
#    Referrer-Policy: strict-origin-when-cross-origin

# 4. Compression (en CyberPanel > Websites > Tu sitio > Caching):
#    - Activar Gzip compression
#    - Cache static files

# =============================================================================
# VERIFICACIÓN DE FUNCIONAMIENTO
# =============================================================================

# Para verificar que todo funciona correctamente:
# 1. Accede a tu-dominio.com/qr-manager/
# 2. Inicia sesión con admin/password
# 3. Crea un QR de prueba
# 4. Verifica que la redirección funcione
# 5. Revisa que los archivos JSON no sean accesibles directamente

# =============================================================================